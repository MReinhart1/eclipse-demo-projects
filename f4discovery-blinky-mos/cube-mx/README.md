## CubeMX folder

This folder contains 

- the `Src` and `Inc` folders, with the code generated by CubeMX
- the `project.ioc` file, with the CubeMX configuration.

### How to further edit the hardware configuration?

The hardware configuration cna be changed at any moment during development.

- start CubeMX
- load `cube-mx/project.ioc` 
- edit 
- generate the code again.

### Changes

The following changes were required to addapt the code generated by CubeMX to the µOS++ project.

#### `main.c`

- add the header to include the trace functions
```
/* USER CODE BEGIN Includes */
#include "cmsis-plus/diag/trace.h"
/* USER CODE END Includes */
```
- rename `main()` to `cube_mx_init()`, by use of a preprocessor definition
```
/* USER CODE BEGIN 0 */
int
cube_mx_init(void);

#define main cube_mx_init
/* USER CODE END 0 */
```
- make `main()` return
```
  /* USER CODE BEGIN 3 */
  return 0;
  /* USER CODE END 3 */
```

#### `stm32f4xx_it.c`

- add an external definition to µOS++ system time handler
```
/* USER CODE BEGIN 0 */
extern void os_systick_handler (void);
/* USER CODE END 0 */
```
- call the µOS++ system time handler in `the SysTick_Handler()`
```
  /* USER CODE BEGIN SysTick_IRQn 1 */
  os_systick_handler ();
  /* USER CODE END SysTick_IRQn 1 */
```

